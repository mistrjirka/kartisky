function round(e,a,t,n,l,o){function d(){e.hand.money+=config.round.money;for(var a=1;config.round.amountOfCards>=a;a++)e.hand.cards.push(e.cardPack[0]),e.cardPack.shift();u()}function u(){console.log("getCards"),newGame.get.playerCardMove(500,5,r,c,l,e,function(a){a.forEach(function(a){i.push({card:e.hand.cards[a],x:null,y:null})}),s()},m,m)}function s(){var a={bool:!0,completleDone:!1,count:0};0!=i.length&&async(33,1e3,function(){alert("async timeout"),m()},function(){i.length>a.count&&1==a.bool&&newGame.get.playerCardPlacement(1e3,e.home,e,battleField,t,c,l,function(t,n){i[a.count].x=t,i[a.count].y=n,battleField=newGame.do.editVirtualBattleField(battleField,[{card:i[a.count].card,location:{x:i[a.count].x,y:i[a.count].y}}],e),newGame.do.virtualToVisual(battleField,document.getElementById("is")),a.bool=!0,a.count+=1},function(){a.bool=!0,a.count+=1},function(e){alert(e+" ne")})},function(){return i.length<=a.count&&1==a.bool?(m(),!0):void(a.bool=!1)})}function m(){console.log("movement"),newGame.get.playersMinionMovement(500,battleField,document.getElementById("is"),e,c,l,o,function(a){if(null!=a.to){var t=battleField[a.from[0]][a.from[1]].card;battleField=newGame.do.removeFromBattleField(battleField,{type:"coordinates",coordinates:[a.from[1],a.from[0]]}),newGame.do.editVirtualBattleField(battleField,[{card:t,location:{x:a.to[1],y:a.to[0]}}],e),newGame.do.virtualToVisual(battleField,document.getElementById("is"))}},function(){f()},function(){alert("akce2")},function(e){console.log(e)},function(){alert("timeout movement"),f()})}function f(){console.log("attack");newGame.do.attack(500,battleField,document.getElementById("is"),e,player2,c,l,o,function(e){alert(e)},function(){alert("cancel")},function(){alert("cancel everything")},function(e){console.log(e)},alert)}var o=document.getElementById(o),r=document.getElementById(a),c=document.getElementById(n),l=document.getElementById(l),t=document.getElementById(t),i=[];newGame.do.virtualToVisual(battleField,t),d()}var nations=[{nation:"people",abilities:{},cards:[{name:"warior 1",price:75,amount:10,statistics:{"class":"warior",attack:100,life:150,weakpoints:{archer:10,warior:0,balista:-5,lancer:0,cavalry:-10}},upgrade:null},{name:"archer 1",price:55,amount:15,statistics:{"class":"archer",attack:70,life:50,weakpoints:{archer:0,warior:-10,balista:-20,lancer:-10,cavalry:-20}}},{name:"balista 1",price:150,amount:3,statistics:{"class":"balista",attack:200,life:75,weakpoints:{archer:100,warior:100,balista:-100,lancer:100,cavalry:100}},upgrade:null},{name:"lancer 1",price:75,amount:10,statistics:{"class":"lancer",attack:70,life:200,weakpoints:{archer:10,warior:0,balista:-10,lancer:0,cavalry:50}},upgrade:null},{name:"cavalry 1",price:90,amount:10,statistics:{"class":"cavalry",attack:100,life:200,weakpoints:{archer:20,warior:20,balista:-10,lancer:-10,cavalry:0}},upgrade:null}]}],newGame=new Kartisky,battleField=newGame.do.formatVirtualBattlefield([[[],[],[],[],[]],[[],[],[],[],[]],[[],[],[],[],[]],[[],[],[],[],[]]]),config={round:{amountOfCards:4,money:100,timeOutForAction:500}},player1=newGame.add.player(newGame.get.cardsByNation("people","all",nations),"hrac1"),player2=newGame.add.player(newGame.get.cardsByNation("people","all",nations),"hrac2");player1.home="top",player2.home="bottom",newGame.do.createBattlefield([4,5],document.getElementById("player1"),"is","200px","100px","200px","100px"),player1.cardPack=newGame.do.makeCardPack(player1.cards),player2.cardPack=newGame.do.makeCardPack(player2.cards),battleField[1][0].owner=player2.id,battleField[1][0].card=nations[0].cards[0],round(player1,"player1","is","accept","cancel","cancelaction");