function findIndex(f,e){for(var a=0;a<f.length;a++)if(e==f[a])return a;return null}String.prototype.hashCode=function(){var f=0;if(0==this.length)return f;for(var e=0;e<this.length;e++){var a=this.charCodeAt(e);f=(f<<5)-f+a;f&=f}return f};Array.prototype.equals&&console.warn("Overriding existing Array.prototype.equals. Possible causes: New API defines the method, there's a framework conflict or you've got double inclusions in your code.");
Array.prototype.equals=function(f){if(!f||this.length!=f.length)return!1;for(var e=0,a=this.length;e<a;e++)if(this[e]instanceof Array&&f[e]instanceof Array){if(!this[e].equals(f[e]))return!1}else if(this[e]!=f[e])return!1;return!0};Object.defineProperty(Array.prototype,"equals",{enumerable:!1});function makeid(){for(var f="",e=0;5>e;e++)f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return f}
function async(){var f=arguments;if("number"==typeof f[0]&&"number"==typeof f[1]&&"function"==typeof f[2]){var e=f[0];var a=f[1];var b=f[2];var c=0;a=setInterval(function(){for(var d=0;d<f.length;d++)0!=d&&1!=d&&2!=d&&"function"==typeof f[d]&&1==f[d](c)&&clearInterval(a);e<=c?(clearInterval(a),b()):c+=1},a)}else console.error("wrong arguments")}
var game=function(f,e){this.add={player:function(a,b){b=void 0===b?makeid():b;return"object"==typeof a?{home:null,id:b,cards:a,cardPack:[],hand:{money:0,cards:[]}}:"Wrong value type!!! "+typeof a},cardsTo:function(a,b,c){if("object"==(typeof b&&typeof a))a.hand.cards.push(b);else return"Wrong value format";if("object"==typeof c){a="";for(var d=0;b.length>d;d++)a=a+"<input type='checkbox' class= 'cardsInHand' id = 'card"+d+"'> class: "+b[d].statistics.class+" damage: "+b[d].statistics.attack+" life: "+
b[d].statistics.life;c.innerHTML=a}}};this.get={playerCardMove:function(a,b,c,d,f,p){function n(){k=!0}if("number"!=typeof a||"object"!=typeof b||"function"!=typeof d||0==c.hand.cards.length)return"Wrong value format: interval Time:"+typeof intervalTime+"and have to be number, time: "+typeof a+"and have to be number, element: "+typeof b+"and have to be object/element, Succes CallBack function: "+typeof d+"and have to be object/function...";makeid().hashCode();for(var e=makeid(),t=document.createElement("ul"),
g=document.createElement("li"),r=0;c.hand.cards.length>r;r++)g.innerHTML="<input type='checkbox' class= '"+e+"'>"+c.hand.cards[r].name+" class: "+c.hand.cards[r].statistics.class+" damage: "+c.hand.cards[r].statistics.attack+" life "+c.hand.cards[r].statistics.life,t.appendChild(g),g=document.createElement("li");document.getElementById(b.id).appendChild(t);var k=!1;document.getElementById(b.button).addEventListener("click",n);var h=!1;"function"==typeof f&&(h=!0);"function"==typeof p&&(h=!0);var u=
[],m=0,l=document.getElementsByClassName(e),q=[],x=setInterval(function(){for(var c=0;c<l.length;c++)1==l[c].checked&&q.push(l[c]);if(1!=q.length)for(c=0;c<u.length;c++)u[c].checked=!1;1==k&&1==q.length&&(clearInterval(x),document.getElementById(b.button).removeEventListener("click",n),d(findIndex(l,q[0])),document.getElementById(b.id).removeChild(t));u=q;m>a&&(1==h&&(document.getElementById(b.id).removeChild(t),document.getElementById(b.button).removeEventListener("click",n),f()),clearInterval(x));
q=[];k=!1;m++},33)},playerCardPlacement:function(a,b,c,d,f,p,e,v,t){v=void 0===v?[null]:v;if("string"==typeof b&&Array.isArray(c)&&"object"==typeof d&&"object"==typeof f&&"function"==typeof p&&"number"==typeof a&&"function"==typeof e){var g=function(){u=!0},n=function(){"unchecked"==this.getAttribute("name")?(this.setAttribute("name","checked"),this.style.backgroundColor="red"):(this.setAttribute("name","unchecked"),this.style.backgroundColor="")},k=[{type:"top",position:d.rows[0],row:0},{type:"bottom",
position:d.rows[d.rows.length-1],row:d.rows[d.rows.length-1]}],h=function(b,c){for(var a=0;b.length>a;a++)if(b[a].type==c){for(c=0;b[a].position.cells.length>c;c++)b[a].position.cells[c].setAttribute("name","unchecked"),b[a].position.cells[c].addEventListener("click",n);return b[a]}}(k,b),u=!1;f.addEventListener("click",g);var m=null,l=null;async(a,33,function(){for(var b=0;b<h.position.cells.length;b++)h.position.cells[b].removeEventListener("click",n),f.removeEventListener("click",g),h.position.cells[b].style.backgroundColor=
"",h.position.cells[b].setAttribute("name","unchecked");e("time out")},function(){for(var b=[],c=0;c<h.position.cells.length;c++)"checked"==h.position.cells[c].getAttribute("name")&&b.push(c);m=b;null!=m&&null!=l&&1<m.length&&(console.log(l[0]),h.position.cells[l[0]].setAttribute("name","unchecked"),h.position.cells[l[0]].style.backgroundColor="");l=m},function(b){"function"==typeof t&&t(b)},function(){if(1==m.length&&1==u){for(var a=0,d=0;k.length>d;d++)k[d].type==b&&(a=k[d].row);for(d=0;d<v.length;d++)if(c[a][m[0]].card==
v[d]){p(m[0],a);for(a=0;a<h.position.cells.length;a++)h.position.cells[a].removeEventListener("click",n),f.removeEventListener("click",g),h.position.cells[a].style.backgroundColor="",h.position.cells[a].setAttribute("name","unchecked");return!0}}u=!1})}else console.log(e)},playersMinionMovement:function(a,b,c,d,f,p,e){if(Array.isArray(a)&&"object"==typeof b&&"object"==typeof c&&"object"==typeof d&&"function"==typeof p&&"number"==typeof f){var n=function(){"unchecked"==this.getAttribute("name")?(this.setAttribute("name",
"checkedID2"),this.style.backgroundColor="powderblue"):(this.setAttribute("name","unchecked"),this.style.backgroundColor="")},t=function(){"unchecked"==this.getAttribute("name")?(this.setAttribute("name","checkedID1"),this.style.backgroundColor="red"):(this.setAttribute("name","unchecked"),this.style.backgroundColor="")},g=null,r=null,k=null,h=null,u=!1,m=0;"function"==typeof e&&(u=!0);var l=!1;d.addEventListener("click",function(){l=!0});for(d=0;d<b.rows.length;d++)for(var q=0;q<b.rows[d].cells.length;q++)a[d][q].owner==
c.id?b.rows[d].cells[q].addEventListener("click",t):null==a[d][q].owner&&b.rows[d].cells[q].addEventListener("click",n);var x=function(a){for(var c=[],d=0;d<b.rows.length;d++)for(var f=0;f<b.rows[d].cells.length;f++)b.rows[d].cells[f].getAttribute("name")==a&&c.push([d,f]);return"undefined"==typeof c[0]?null:c},y=function(c,a){for(c=0;c<a.length;c++)b.rows[a[c][0]].cells[a[c][1]].setAttribute("name","unchecked"),b.rows[a[c][0]].cells[a[c][1]].style.backgroundColor=""},z=setInterval(function(){g=x("checkedID1");
k=x("checkedID2");null!=g&&1<g.length&&y(g,r);null!=k&&1<k.length&&y(k,h);r=g;h=k;if(null!=g&&null!=k)if(1==l&&null!=a[g[0][0]][g[0][1]].card&&null==a[k[0][0]][k[0][1]].cards){for(var c=0;c<b.rows.length;c++)for(var d=0;d<b.rows[c].cells.length;d++)b.rows[c].cells[d].setAttribute("name","unchecked"),b.rows[c].cells[d].style.backgroundColor="",b.rows[c].cells[d].removeEventListener("click",t),b.rows[c].cells[d].removeEventListener("click",n);clearInterval(z);p(g[0],k[0])}else null!=k&&null!=g&&console.log(a[g[0][0]][g[0][1]].card);
l=!1;m+=1;if(m>f){for(c=0;c<b.rows.length;c++)for(d=0;d<b.rows[c].cells.length;d++)b.rows[c].cells[d].setAttribute("name","unchecked"),b.rows[c].cells[d].style.backgroundColor="",b.rows[c].cells[d].removeEventListener("click",t),b.rows[c].cells[d].removeEventListener("click",n);clearInterval(z);1==u&&e("time out")}},33)}else console.log("Wrong value type")},cardsByNation:function(a,b,c){if("object"==typeof c){for(var d=0;d<c.length;d++)if(c[d].nation==a)if("string"==typeof b){if("all"==b)return c[d].cards}else{if("object"==
typeof b){if("number"==typeof b[0]){a=[];for(var f=0;f<b.length;f++)a[f]=c[d].cards[b[f]];return a}return"Wrong value type!!! cards[0] "+typeof b[0]}return"Wrong value type!!! cards "+typeof b}return"Nation or cards weren't found..."}return"Wrong value type!!! nations"+typeof c},roundItems:function(a){}};this.do={removeFromBattleField:function(a,b){if(Array.isArray(a)&&"object"==typeof b){if("coordinates"==b.type)return a[b.coordinates[1]][b.coordinates[0]].card=null,a[b.coordinates[1]][b.coordinates[0]].owner=
null,a}else return a},formatVirtualBattlefield:function(a){a.forEach(function(b,c){for(c=0;b.length>c;c++)b[c]={},b[c].card=null,b[c].owner=null});return a},createBattlefield:function(a,b,c,d,f,e,w){if(1==Array.isArray(a)&&"string"==typeof d&&"string"==typeof f&&"string"==typeof e&&"string"==typeof w&&"object"==typeof b&&"string"==typeof c){var p=document.createElement("table");p.setAttribute("id",c);for(c=0;c<a[0];c++){var n=p.insertRow(c);n.style.width=d;n.style.height=f;for(var g=0;g<a[1];g++){var r=
n.insertCell(g);r.setAttribute("name","unchecked");r.style.width=e;r.style.height=w}}b.appendChild(p)}else return"Wrong value Type... dimensions have to be Array!!!"},editVirtualBattleField:function(a,b,c){if("object"==typeof a&&1==Array.isArray(b)&&"object"==typeof c){for(var d=0;d<b.length;d++)console.log(b[d].location.y),a[b[d].location.y][b[d].location.x].card=b[d].card,a[b[d].location.y][b[d].location.x].owner=c.id;return a}return"Wrong value Type... virtual BattleField have to be Array!!!"},
attack:function(a,b,c,d,f,e,w,v,t){if("object"==typeof d&&"object"==typeof f&&1==Array.isArray(b)&&"object"==typeof c&&"number"==typeof a&&"function"==typeof w&&"function"==typeof v&&"object"==typeof e){var g=function(b){for(var a=[],d=0;d<c.rows.length;d++)for(var f=0;f<c.rows[d].cells.length;f++)c.rows[d].cells[f].getAttribute("name")==b&&a.push([d,f]);return"undefined"==typeof a[0]?null:a},n=function(){"checkedID2"==this.getAttribute("name")?(this.setAttribute("name","unchecked"),this.style.backgroundColor=
""):(this.style.backgroundColor="powderblue",this.setAttribute("name","checkedID2"))},k=function(){"checkedID1"==this.getAttribute("name")?(this.setAttribute("name","unchecked"),this.style.backgroundColor=""):(this.style.backgroundColor="red",this.setAttribute("name","checkedID1"))};e.addEventListener("click",function(){q=!0});for(a=0;a<b.length;a++)for(e=0;e<b[a].length;e++)c.rows[a].cells[e].setAttribute("name","unchecked"),b[a][e].owner==d.id&&c.rows[a].cells[e].addEventListener("click",k),b[a][e].owner==
f.id&&c.rows[a].cells[e].addEventListener("click",n);var h=null,p=null,m=null,l=null,q=!1;async(1E3,33,function(){for(var a=0;a<b.length;a++)for(var e=0;e<b[a].length;e++)b[a][e].owner==d.id&&(c.rows[a].cells[e].removeEventListener("click",k),c.rows[a].cells[e].setAttribute("name","unchecked"),c.rows[a].cells[e].style.backgroundColor=""),b[a][e].owner==f.id&&(c.rows[a].cells[e].removeEventListener("click",n),c.rows[a].cells[e].setAttribute("name","unchecked"),c.rows[a].cells[e].style.backgroundColor=
"");v()},function(){h=g("checkedID1");p=g("checkedID2");if(null!=h&&1<h.length)for(var a=0;a<m.length;a++)c.rows[m[0][0]].cells[m[0][1]].setAttribute("name","unchecked"),c.rows[m[0][0]].cells[m[0][1]].style.backgroundColor="";if(null!=p&&1<p.length)for(a=0;a<l.length;a++)c.rows[l[0][0]].cells[l[0][1]].setAttribute("name","unchecked"),c.rows[l[0][0]].cells[l[0][1]].style.backgroundColor="";if(1==q&&null!=h&&null!=p&&1==h.length&&1==p.length){for(a=0;a<b.length;a++)for(var e=0;e<b[a].length;e++)b[a][e].owner==
d.id&&(c.rows[a].cells[e].removeEventListener("click",k),c.rows[a].cells[e].setAttribute("name","unchecked"),c.rows[a].cells[e].style.backgroundColor=""),b[a][e].owner==f.id&&(c.rows[a].cells[e].removeEventListener("click",n),c.rows[a].cells[e].setAttribute("name","unchecked"),c.rows[a].cells[e].style.backgroundColor="");w(h[0],p[0]);return!0}m=h;l=p;q=!1})}},makeCardPack:function(a){var b=[];a.forEach(function(c,d,e){for(c=Math.floor(Math.random()*a.length+0);null!=findIndex(b,e[c]);)c=Math.floor(Math.random()*
a.length+0),findIndex(b,e[c]);b.push(e[c]);console.log(b)});return b},virtualToVisual:function(a,b){a.forEach(function(a,d,e){a.forEach(function(a,c,e){b.rows[d].cells[c].innerHTML=null!=a.card&&null!=a.owner?"owner: "+a.owner+" name: "+a.card.name+" class: "+a.card.statistics.class+" damage: "+a.card.statistics.attack+" health: "+a.card.statistics.life:""})})}}};
